<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Structure-Preserving Image Editing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Structure-Preserving Image Editing</h1>
            <p>AI-powered image augmentation with structural constraints</p>
        </header>

        <main>
            <!-- Upload Section -->
            <section class="upload-section">
                <h2>Upload Image</h2>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageInput" accept="image/*" hidden>
                    <div class="upload-placeholder">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <p>Click to upload or drag and drop</p>
                        <small>PNG, JPG, BMP, TIFF (Max 50MB)</small>
                    </div>
                </div>
                <div class="upload-info" id="uploadInfo" style="display: none;">
                    <span id="uploadedFileName"></span>
                    <button id="removeImage" class="btn-secondary">Remove</button>
                </div>
            </section>

            <!-- Edit Section -->
            <section class="edit-section">
                <h2>Edit Instructions</h2>
                <div class="edit-controls">
                    <div class="input-group">
                        <label for="instructionInput">Instruction:</label>
                        <textarea id="instructionInput" placeholder="Describe the changes you want to make..." rows="3"></textarea>
                    </div>
                    
                    <div class="parameters">
                        <div class="parameter">
                            <label for="strengthSlider">Strength:</label>
                            <input type="range" id="strengthSlider" min="0.1" max="1.0" step="0.1" value="0.8">
                            <span id="strengthValue">0.8</span>
                        </div>
                        
                        <div class="parameter">
                            <label for="guidanceSlider">Guidance Scale:</label>
                            <input type="range" id="guidanceSlider" min="1.0" max="15.0" step="0.5" value="7.5">
                            <span id="guidanceValue">7.5</span>
                        </div>
                        
                        <div class="parameter">
                            <label for="stepsSlider">Inference Steps:</label>
                            <input type="range" id="stepsSlider" min="10" max="50" step="5" value="20">
                            <span id="stepsValue">20</span>
                        </div>
                    </div>
                    
                    <button id="applyEditBtn" class="btn-primary" disabled>Apply Edit</button>
                </div>
            </section>

            <!-- Image Comparison -->
            <section class="comparison-section">
                <h2>Before / After</h2>
                <div class="image-comparison">
                    <div class="image-container">
                        <h3>Original</h3>
                        <div class="image-wrapper" id="originalImageWrapper">
                            <div class="no-image-placeholder">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                                <p>No image uploaded</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="image-container">
                        <h3>Edited</h3>
                        <div class="image-wrapper" id="editedImageWrapper">
                            <div class="no-image-placeholder">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                                <p>No edits applied</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                    <div class="spinner"></div>
                    <p>Processing image...</p>
                </div>
            </section>

            <!-- Metrics Section -->
            <section class="metrics-section">
                <h2>Quality Metrics</h2>
                <div class="metrics-grid" id="metricsGrid">
                    <div class="metric-card">
                        <h3>SSIM</h3>
                        <div class="metric-value" id="ssimValue">-</div>
                        <div class="metric-description">Structural Similarity</div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>LPIPS</h3>
                        <div class="metric-value" id="lpipsValue">-</div>
                        <div class="metric-description">Perceptual Similarity</div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>PSNR</h3>
                        <div class="metric-value" id="psnrValue">-</div>
                        <div class="metric-description">Peak Signal-to-Noise Ratio</div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>Edge Preservation</h3>
                        <div class="metric-value" id="edgeValue">-</div>
                        <div class="metric-description">Edge Structure Preservation</div>
                    </div>
                </div>
            </section>

            <!-- Edit History -->
            <section class="history-section">
                <h2>Edit History</h2>
                <div class="history-controls">
                    <button id="newSessionBtn" class="btn-secondary">New Session</button>
                    <button id="clearHistoryBtn" class="btn-secondary">Clear History</button>
                </div>
                <div class="history-list" id="historyList">
                    <div class="no-history">
                        <p>No edit history yet. Upload an image and start editing!</p>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Structure-Preserving Image Editing System - Research Demo</p>
        </footer>
    </div>

    <!-- Status Messages -->
    <div class="status-container" id="statusContainer"></div>

    <script src="script.js"></script>
</body>
</html>
